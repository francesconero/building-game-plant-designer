(this["webpackJsonpsatisfactory-plant-designer"]=this["webpackJsonpsatisfactory-plant-designer"]||[]).push([[0],{542:function(e,t,c){},873:function(e,t,c){"use strict";c.r(t);var a=c(5),n=c(0),r=c.n(n),s=c(19),i=c.n(s),j=(c(542),c(949)),o=c(406),l=c(22),u=c(171),b=c(371),d=function e(t){var c=this;Object(u.a)(this,e),this.targetDataProvider=t,this.getList=function(e,t){return c.targetDataProvider.getList(e,t)},this.getOne=function(e,t){return c.targetDataProvider.getOne(e,t)},this.getMany=function(e,t){return c.targetDataProvider.getMany(e,t)},this.getManyReference=function(e,t){return c.targetDataProvider.getManyReference(e,t)},this.update=function(e,t){return c.targetDataProvider.update(e,t)},this.updateMany=function(e,t){return c.targetDataProvider.updateMany(e,t)},this.create=function(e,t){return c.targetDataProvider.create(e,t)},this.delete=function(e,t){return c.targetDataProvider.delete(e,t)},this.deleteMany=function(e,t){return c.targetDataProvider.deleteMany(e,t)}},O=function(e){var t=new d(Object(b.a)(e));return Object(l.a)(Object(l.a)({},t),{},{import:function(c){return localStorage.setItem(e.localStorageKey,JSON.stringify(c)),t.targetDataProvider=Object(b.a)(e),console.info("Successfully imported DB"),Promise.resolve({data:c})},export:function(){var t=localStorage.getItem(e.localStorageKey);return t?Promise.resolve({data:{db:JSON.parse(t),key:e.localStorageKey}}):{}}})},x=c(956),f=c(934),h=c(951),p=c(950),m=c(939),g=c(940),v=c(957),y=c(959),k=c(479),w=c(168),C=c(941),S=c(960),D=c(298),P=c(70),I=c.n(P),R=["solid","liquid"].map((function(e){return{id:e,name:e}})),V=function(e){return Object(a.jsx)(x.a,Object(l.a)(Object(l.a)({},e),{},{children:Object(a.jsx)(f.a,{source:"q",alwaysOn:!0})}))},M=function(e){return Object(a.jsx)(h.a,Object(l.a)(Object(l.a)({},e),{},{filters:Object(a.jsx)(V,{}),children:Object(a.jsxs)(p.a,{children:[Object(a.jsx)(m.a,{source:"id"}),Object(a.jsx)(m.a,{source:"name"}),Object(a.jsx)(m.a,{source:"type"}),Object(a.jsx)(D.ColorField,{source:"color"}),Object(a.jsx)(g.a,{})]})}))},B=function(e){var t=e.record;return t?Object(a.jsxs)("span",{children:["Resource #",t.id," - ",t.name]}):null},T=function(e){return Object(a.jsx)(v.a,Object(l.a)(Object(l.a)({title:Object(a.jsx)(B,{})},e),{},{transform:function(e){return e.id?e:Object(l.a)(Object(l.a)({},e),{},{id:I.a.camelCase(e.name)})},children:Object(a.jsxs)(y.a,{children:[Object(a.jsx)(k.a,{source:"id"}),Object(a.jsx)(k.a,{source:"name",validate:Object(w.k)()}),Object(a.jsx)(C.a,{choices:R,source:"type",validate:Object(w.k)(),defaultValue:"solid"}),Object(a.jsx)(D.ColorInput,{source:"color",defaultValue:"#000000"})]})}))},F=function(e){return Object(a.jsx)(S.a,Object(l.a)(Object(l.a)({title:"Create a Resource"},e),{},{transform:function(e){return e.id?e:Object(l.a)(Object(l.a)({},e),{},{id:I.a.camelCase(e.name)})},children:Object(a.jsxs)(y.a,{children:[Object(a.jsx)(k.a,{source:"id"}),Object(a.jsx)(k.a,{source:"name",validate:Object(w.k)()}),Object(a.jsx)(C.a,{choices:R,source:"type",defaultValue:"solid"}),Object(a.jsx)(D.ColorInput,{source:"color",defaultValue:"#000000"})]})}))},L=c(942),N=c(943),E=c(961),J=c(955),q=function(e){return Object(a.jsx)(x.a,Object(l.a)(Object(l.a)({},e),{},{children:Object(a.jsx)(f.a,{source:"q",alwaysOn:!0})}))},K=function(e){return Object(a.jsx)(h.a,Object(l.a)(Object(l.a)({},e),{},{filters:Object(a.jsx)(q,{}),children:Object(a.jsxs)(p.a,{children:[Object(a.jsx)(m.a,{source:"id"}),Object(a.jsx)(m.a,{source:"name"}),Object(a.jsx)(L.a,{source:"powerConsumption"}),Object(a.jsx)(g.a,{})]})}))},A=function(e){var t=e.record;return t?Object(a.jsxs)("span",{children:["Building #",t.id," - ",t.name]}):null},U=function(e){return Object(a.jsx)(v.a,Object(l.a)(Object(l.a)({title:Object(a.jsx)(A,{})},e),{},{transform:function(e){return e.id?e:Object(l.a)(Object(l.a)({},e),{},{id:I.a.camelCase(e.name)})},children:Object(a.jsxs)(y.a,{children:[Object(a.jsx)(k.a,{source:"id"}),Object(a.jsx)(k.a,{source:"name",validate:Object(w.k)()}),Object(a.jsx)(N.a,{source:"powerConsumption",validate:Object(w.k)()}),Object(a.jsx)(E.a,{source:"inputs",defaultValue:[],children:Object(a.jsx)(J.a,{children:Object(a.jsx)(C.a,{choices:R})})}),Object(a.jsx)(E.a,{source:"outputs",defaultValue:[],children:Object(a.jsx)(J.a,{children:Object(a.jsx)(C.a,{choices:R})})})]})}))},_=function(e){return Object(a.jsx)(S.a,Object(l.a)(Object(l.a)({title:"Create a Building"},e),{},{transform:function(e){return e.id?e:Object(l.a)(Object(l.a)({},e),{},{id:I.a.camelCase(e.name)})},children:Object(a.jsxs)(y.a,{children:[Object(a.jsx)(k.a,{source:"id"}),Object(a.jsx)(k.a,{source:"name",validate:Object(w.k)()}),Object(a.jsx)(N.a,{source:"powerConsumption",validate:Object(w.k)()}),Object(a.jsx)(E.a,{source:"inputs",defaultValue:[],children:Object(a.jsx)(J.a,{children:Object(a.jsx)(C.a,{choices:R})})}),Object(a.jsx)(E.a,{source:"outputs",defaultValue:[],children:Object(a.jsx)(J.a,{children:Object(a.jsx)(C.a,{choices:R})})})]})}))},W=c(146),z=c(212),G=c(944),H=c(945),Q=c(946),X=c(958),Y=c(76),Z=c(495),$=c(496),ee=c(953),te=c(962),ce=c(963),ae=c(299),ne=c(35),re=c(493),se=c.n(re),ie=function(e){return Object(a.jsx)(x.a,Object(l.a)(Object(l.a)({},e),{},{children:Object(a.jsx)(f.a,{source:"q",alwaysOn:!0})}))},je=function(e){return Object(a.jsx)(h.a,Object(l.a)(Object(l.a)({},e),{},{filters:Object(a.jsx)(ie,{}),children:Object(a.jsxs)(p.a,{children:[Object(a.jsx)(m.a,{source:"id"}),Object(a.jsx)(m.a,{source:"name"}),Object(a.jsx)(G.a,{source:"inputs",children:Object(a.jsx)(H.a,{children:Object(a.jsx)(Q.a,{label:"Input",source:"resource",reference:"resources",children:Object(a.jsx)(X.a,{source:"name"})})})}),Object(a.jsx)(G.a,{source:"outputs",children:Object(a.jsx)(H.a,{children:Object(a.jsx)(Q.a,{label:"Output",source:"resource",reference:"resources",children:Object(a.jsx)(X.a,{source:"name"})})})}),Object(a.jsx)(Q.a,{label:"Building",source:"building",reference:"buildings",children:Object(a.jsx)(m.a,{source:"name"})}),Object(a.jsx)(g.a,{})]})}))},oe=function(e){var t=e.record;return t?Object(a.jsxs)("span",{children:["Recipe #",t.id," - ",t.name]}):null},le=function e(t,c){Object(u.a)(this,e),this.nodes=t,this.edges=c},ue=function(){var e=Object(Y.a)(),t=Object(ne.f)().values,c=Object(n.useState)(),r=Object(z.a)(c,2),s=r[0],i=r[1],j=Object(n.useState)(!0),o=Object(z.a)(j,2),u=o[0],b=o[1],d=Object(n.useState)(),O=Object(z.a)(d,2),x=O[0],f=O[1];return Object(n.useEffect)((function(){t&&Promise.all([e.getOne("buildings",{id:t.building}),e.getMany("resources",{ids:t.inputs.filter(I.a.negate(I.a.isNil)).map((function(e){return e.resource}))}),e.getMany("resources",{ids:t.outputs.filter(I.a.negate(I.a.isNil)).map((function(e){return e.resource}))})]).then((function(e){var t=Object(z.a)(e,3),c=t[0].data,a=t[1].data,n=t[2].data,r={id:"building_".concat(c.id),text:c.name},s=a.map((function(e){return{id:"input_".concat(e.id),text:e.name,data:{color:e.color}}})),j=n.map((function(e){return{id:"output_".concat(e.id),text:e.name,data:{color:e.color}}})),o=s.map((function(e){return{id:"".concat(e.id,"->").concat(r.id),from:e.id,to:r.id}})),l=j.map((function(e){return{id:"".concat(r.id,"->").concat(e.id),from:r.id,to:e.id}})),u=new le([r].concat(Object(W.a)(s),Object(W.a)(j)),[].concat(Object(W.a)(o),Object(W.a)(l)));i(u),b(!1)})).catch((function(e){f(e),b(!1)}))}),[e,t]),u?Object(a.jsx)(Z.a,{}):x?Object(a.jsx)($.a,{error:x}):s?Object(a.jsx)("div",{style:{position:"relative",height:500,width:"100%"},children:Object(a.jsx)("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0},children:Object(a.jsx)(ae.Canvas,{fit:!0,nodes:s.nodes,edges:s.edges,node:function(e){var t,c;return Object(a.jsx)(ae.Node,Object(l.a)(Object(l.a)({},e),{},{style:{fill:(null===(t=e.properties.data)||void 0===t?void 0:t.color)||"#123456"},label:Object(a.jsx)(ae.Label,{style:{fill:se()((null===(c=e.properties.data)||void 0===c?void 0:c.color)||"#123456",!0)}})}))}})})}):null},be=function(e){return Object(a.jsx)(v.a,Object(l.a)(Object(l.a)({title:Object(a.jsx)(oe,{})},e),{},{transform:function(e){return e.id?e:Object(l.a)(Object(l.a)({},e),{},{id:I.a.camelCase(e.name)})},children:Object(a.jsxs)(ee.a,{children:[Object(a.jsxs)(te.a,{label:"Properties",children:[Object(a.jsx)(k.a,{source:"id"}),Object(a.jsx)(k.a,{source:"name",validate:Object(w.k)()}),Object(a.jsx)(E.a,{source:"inputs",defaultValue:[],children:Object(a.jsxs)(J.a,{children:[Object(a.jsx)(ce.a,{label:"resource",source:"resource",reference:"resources",validate:Object(w.k)(),children:Object(a.jsx)(C.a,{optionText:"name"})}),Object(a.jsx)(N.a,{source:"flowRate",validate:Object(w.k)()})]})}),Object(a.jsx)(E.a,{source:"outputs",defaultValue:[],children:Object(a.jsxs)(J.a,{children:[Object(a.jsx)(ce.a,{label:"resource",source:"resource",reference:"resources",validate:Object(w.k)(),children:Object(a.jsx)(C.a,{optionText:"name"})}),Object(a.jsx)(N.a,{source:"flowRate",validate:Object(w.k)()})]})}),Object(a.jsx)(ce.a,{label:"building",source:"building",reference:"buildings",validate:Object(w.k)(),children:Object(a.jsx)(C.a,{optionText:"name"})})]}),Object(a.jsx)(te.a,{label:"Design",children:Object(a.jsx)(ue,{})})]})}))},de=function(e){return Object(a.jsx)(S.a,Object(l.a)(Object(l.a)({title:"Create a Recipe"},e),{},{transform:function(e){return e.id?e:Object(l.a)(Object(l.a)({},e),{},{id:I.a.camelCase(e.name)})},children:Object(a.jsxs)(y.a,{children:[Object(a.jsx)(k.a,{source:"id"}),Object(a.jsx)(k.a,{source:"name",validate:Object(w.k)()}),Object(a.jsx)(E.a,{source:"inputs",defaultValue:[],children:Object(a.jsxs)(J.a,{children:[Object(a.jsx)(ce.a,{label:"resource",source:"resource",reference:"resources",validate:Object(w.k)(),children:Object(a.jsx)(C.a,{optionText:"name"})}),Object(a.jsx)(N.a,{source:"flowRate",validate:Object(w.k)()})]})}),Object(a.jsx)(E.a,{source:"outputs",defaultValue:[],children:Object(a.jsxs)(J.a,{children:[Object(a.jsx)(ce.a,{label:"resource",source:"resource",reference:"resources",validate:Object(w.k)(),children:Object(a.jsx)(C.a,{optionText:"name"})}),Object(a.jsx)(N.a,{source:"flowRate",validate:Object(w.k)()})]})}),Object(a.jsx)(ce.a,{label:"building",source:"building",reference:"buildings",validate:Object(w.k)(),children:Object(a.jsx)(C.a,{optionText:"name"})})]})}))},Oe=c(952),xe=c(947),fe=c(93),he=c(936),pe=c(948),me=c(938),ge=c(513),ve=c(498),ye=c.n(ve),ke=c(499),we=c.n(ke),Ce=c(89),Se=function(){var e=Object(Y.a)(),t=Object(Ce.a)();return Object(a.jsx)(Oe.a,{mt:2,children:Object(a.jsxs)(xe.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",spacing:3,children:[Object(a.jsx)(xe.a,{item:!0,children:Object(a.jsx)(fe.a,{variant:"h3",component:"h1",children:"Welcome to the generic building game plant designer"})}),Object(a.jsx)(xe.a,{item:!0,children:Object(a.jsxs)(he.a,{children:[Object(a.jsx)(pe.a,{title:"Import/Export DB"}),Object(a.jsx)(me.a,{children:Object(a.jsxs)(xe.a,{container:!0,spacing:1,children:[Object(a.jsxs)(xe.a,{item:!0,children:[Object(a.jsx)("input",{accept:"application/json",id:"contained-button-file",style:{display:"none"},type:"file",onChange:function(c){var a,n=null===(a=c.target.files)||void 0===a?void 0:a[0];if(n){var r=new FileReader;r.onload=function(a){var n,r=null===(n=a.target)||void 0===n?void 0:n.result;if(r&&"string"===typeof r){var s=JSON.parse(r);e.import(s).then((function(){c.target.value="",t("Import successful")}))}else console.error("Could not read file")},r.readAsText(n,"utf-8")}}}),Object(a.jsx)("label",{htmlFor:"contained-button-file",children:Object(a.jsx)(ge.a,{variant:"contained",startIcon:Object(a.jsx)(ye.a,{}),component:"span",children:"Import"})})]}),Object(a.jsx)(xe.a,{item:!0,children:Object(a.jsx)(ge.a,{variant:"contained",startIcon:Object(a.jsx)(we.a,{}),onClick:function(t){e.export().then((function(e){var t=e.data,c=t.db,a=t.key;if(c){var n=new Blob([JSON.stringify(c,null,2)],{type:"application/json"}),r=document.createElement("a");r.style.display="none",document.body.appendChild(r),window.navigator&&window.navigator.msSaveOrOpenBlob?window.navigator.msSaveOrOpenBlob(n,"".concat(a,".json")):(r.setAttribute("href",URL.createObjectURL(n)),r.setAttribute("download","".concat(a,".json")),r.click())}}))},children:"Export"})})]})})]})})]})})},De=O({defaultData:{},localStorageKey:"plantDesigner",localStorageUpdateDelay:0,loggingEnabled:!0}),Pe=function(){return Object(a.jsxs)(j.a,{dataProvider:De,dashboard:Se,children:[Object(a.jsx)(o.a,{name:"resources",list:M,create:F,edit:T}),Object(a.jsx)(o.a,{name:"buildings",list:K,create:_,edit:U}),Object(a.jsx)(o.a,{name:"recipes",list:je,create:de,edit:be})]})},Ie=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,966)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),a(e),n(e),r(e),s(e)}))};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(Pe,{})}),document.getElementById("root")),Ie()}},[[873,1,2]]]);
//# sourceMappingURL=main.f3b057e7.chunk.js.map