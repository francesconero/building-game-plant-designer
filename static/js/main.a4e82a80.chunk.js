(this["webpackJsonpsatisfactory-plant-designer"]=this["webpackJsonpsatisfactory-plant-designer"]||[]).push([[0],{534:function(e,t,c){},865:function(e,t,c){"use strict";c.r(t);var a=c(5),s=c(0),j=c.n(s),r=c(19),n=c.n(r),i=(c(534),c(942)),o=c(399),u=c(505),b=c(23),l=c(947),O=c(929),d=c(944),x=c(943),f=c(934),h=c(935),p=c(949),m=c(951),g=c(474),v=c(166),k=c(936),C=c(952),y=c(296),w=c(70),V=c.n(w),R=c(284),T=["solid","liquid"].map((function(e){return{id:e,name:e}})),S=function(e){return Object(a.jsx)(l.a,Object(b.a)(Object(b.a)({},e),{},{children:Object(a.jsx)(O.a,{source:"q",alwaysOn:!0})}))},B=function(e){return Object(a.jsx)(d.a,Object(b.a)(Object(b.a)({},e),{},{filters:Object(a.jsx)(S,{}),children:Object(a.jsxs)(x.a,{children:[Object(a.jsx)(f.a,{source:"id"}),Object(a.jsx)(f.a,{source:"name"}),Object(a.jsx)(f.a,{source:"type"}),Object(a.jsx)(y.ColorField,{source:"color"}),Object(a.jsx)(h.a,{})]})}))},D=function(e){var t=e.record;return t?Object(a.jsxs)("span",{children:["Resource #",t.id," - ",t.name]}):null},F=function(e){return Object(a.jsx)(p.a,Object(b.a)(Object(b.a)({title:Object(a.jsx)(D,{})},e),{},{transform:function(e){return e.id?e:Object(b.a)(Object(b.a)({},e),{},{id:V.a.camelCase(e.name)})},children:Object(a.jsxs)(m.a,{children:[Object(a.jsx)(g.a,{source:"id"}),Object(a.jsx)(g.a,{source:"name",validate:Object(v.k)()}),Object(a.jsx)(k.a,{choices:T,source:"type",validate:Object(v.k)(),defaultValue:"solid"}),Object(a.jsx)(y.ColorInput,{source:"color",defaultValue:"#000000"})]})}))},I=function(e){return Object(a.jsx)(C.a,Object(b.a)(Object(b.a)({title:"Create a Resource"},e),{},{transform:function(e){return e.id?e:Object(b.a)(Object(b.a)({},e),{},{id:V.a.camelCase(e.name)})},children:Object(a.jsxs)(m.a,{children:[Object(a.jsx)(g.a,{source:"id"}),Object(a.jsx)(g.a,{source:"name",validate:Object(v.k)()}),Object(a.jsx)(k.a,{choices:T,source:"type",defaultValue:"solid"}),Object(a.jsx)(y.ColorInput,{source:"color",defaultValue:"#000000"})]})}))},P=c(937),q=c(938),E=c(953),L=c(946),M=function(e){return Object(a.jsx)(l.a,Object(b.a)(Object(b.a)({},e),{},{children:Object(a.jsx)(O.a,{source:"q",alwaysOn:!0})}))},N=function(e){return Object(a.jsx)(d.a,Object(b.a)(Object(b.a)({},e),{},{filters:Object(a.jsx)(M,{}),children:Object(a.jsxs)(x.a,{children:[Object(a.jsx)(f.a,{source:"id"}),Object(a.jsx)(f.a,{source:"name"}),Object(a.jsx)(P.a,{source:"powerConsumption"}),Object(a.jsx)(h.a,{})]})}))},_=function(e){var t=e.record;return t?Object(a.jsxs)("span",{children:["Building #",t.id," - ",t.name]}):null},J=function(e){return Object(a.jsx)(p.a,Object(b.a)(Object(b.a)({title:Object(a.jsx)(_,{})},e),{},{transform:function(e){return e.id?e:Object(b.a)(Object(b.a)({},e),{},{id:V.a.camelCase(e.name)})},children:Object(a.jsxs)(m.a,{children:[Object(a.jsx)(g.a,{source:"id"}),Object(a.jsx)(g.a,{source:"name",validate:Object(v.k)()}),Object(a.jsx)(q.a,{source:"powerConsumption",validate:Object(v.k)()}),Object(a.jsx)(E.a,{source:"inputs",defaultValue:[],children:Object(a.jsx)(L.a,{children:Object(a.jsx)(k.a,{choices:T})})}),Object(a.jsx)(E.a,{source:"outputs",defaultValue:[],children:Object(a.jsx)(L.a,{children:Object(a.jsx)(k.a,{choices:T})})})]})}))},K=function(e){return Object(a.jsx)(C.a,Object(b.a)(Object(b.a)({title:"Create a Building"},e),{},{transform:function(e){return e.id?e:Object(b.a)(Object(b.a)({},e),{},{id:V.a.camelCase(e.name)})},children:Object(a.jsxs)(m.a,{children:[Object(a.jsx)(g.a,{source:"id"}),Object(a.jsx)(g.a,{source:"name",validate:Object(v.k)()}),Object(a.jsx)(q.a,{source:"powerConsumption",validate:Object(v.k)()}),Object(a.jsx)(E.a,{source:"inputs",defaultValue:[],children:Object(a.jsx)(L.a,{children:Object(a.jsx)(k.a,{choices:T})})}),Object(a.jsx)(E.a,{source:"outputs",defaultValue:[],children:Object(a.jsx)(L.a,{children:Object(a.jsx)(k.a,{choices:T})})})]})}))},U=c(143),z=c(209),A=c(939),G=c(940),H=c(941),Q=c(950),W=c(75),X=c(490),Y=c(491),Z=c(945),$=c(954),ee=c(955),te=c(297),ce=c(35),ae=c(488),se=c.n(ae),je=function(e){return Object(a.jsx)(l.a,Object(b.a)(Object(b.a)({},e),{},{children:Object(a.jsx)(O.a,{source:"q",alwaysOn:!0})}))},re=function(e){return Object(a.jsx)(d.a,Object(b.a)(Object(b.a)({},e),{},{filters:Object(a.jsx)(je,{}),children:Object(a.jsxs)(x.a,{children:[Object(a.jsx)(f.a,{source:"id"}),Object(a.jsx)(f.a,{source:"name"}),Object(a.jsx)(A.a,{source:"inputs",children:Object(a.jsx)(G.a,{children:Object(a.jsx)(H.a,{label:"Input",source:"resource",reference:"resources",children:Object(a.jsx)(Q.a,{source:"name"})})})}),Object(a.jsx)(A.a,{source:"outputs",children:Object(a.jsx)(G.a,{children:Object(a.jsx)(H.a,{label:"Output",source:"resource",reference:"resources",children:Object(a.jsx)(Q.a,{source:"name"})})})}),Object(a.jsx)(H.a,{label:"Building",source:"building",reference:"buildings",children:Object(a.jsx)(f.a,{source:"name"})}),Object(a.jsx)(h.a,{})]})}))},ne=function(e){var t=e.record;return t?Object(a.jsxs)("span",{children:["Recipe #",t.id," - ",t.name]}):null},ie=function e(t,c){Object(R.a)(this,e),this.nodes=t,this.edges=c},oe=function(){var e=Object(W.a)(),t=Object(ce.f)().values,c=Object(s.useState)(),j=Object(z.a)(c,2),r=j[0],n=j[1],i=Object(s.useState)(!0),o=Object(z.a)(i,2),u=o[0],l=o[1],O=Object(s.useState)(),d=Object(z.a)(O,2),x=d[0],f=d[1];return Object(s.useEffect)((function(){t&&Promise.all([e.getOne("buildings",{id:t.building}),e.getMany("resources",{ids:t.inputs.filter(V.a.negate(V.a.isNil)).map((function(e){return e.resource}))}),e.getMany("resources",{ids:t.outputs.filter(V.a.negate(V.a.isNil)).map((function(e){return e.resource}))})]).then((function(e){var t=Object(z.a)(e,3),c=t[0].data,a=t[1].data,s=t[2].data,j={id:"building_".concat(c.id),text:c.name},r=a.map((function(e){return{id:"input_".concat(e.id),text:e.name,data:{color:e.color}}})),i=s.map((function(e){return{id:"output_".concat(e.id),text:e.name,data:{color:e.color}}})),o=r.map((function(e){return{id:"".concat(e.id,"->").concat(j.id),from:e.id,to:j.id}})),u=i.map((function(e){return{id:"".concat(j.id,"->").concat(e.id),from:j.id,to:e.id}})),b=new ie([j].concat(Object(U.a)(r),Object(U.a)(i)),[].concat(Object(U.a)(o),Object(U.a)(u)));n(b),l(!1)})).catch((function(e){f(e),l(!1)}))}),[e,t]),u?Object(a.jsx)(X.a,{}):x?Object(a.jsx)(Y.a,{error:x}):r?Object(a.jsx)("div",{style:{position:"relative",height:500,width:"100%"},children:Object(a.jsx)("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0},children:Object(a.jsx)(te.Canvas,{fit:!0,pannable:!1,nodes:r.nodes,edges:r.edges,node:function(e){var t,c;return Object(a.jsx)(te.Node,Object(b.a)(Object(b.a)({},e),{},{style:{fill:(null===(t=e.properties.data)||void 0===t?void 0:t.color)||"#123456"},label:Object(a.jsx)(te.Label,{style:{fill:se()((null===(c=e.properties.data)||void 0===c?void 0:c.color)||"#123456",!0)}})}))}})})}):null},ue=function(e){return Object(a.jsx)(p.a,Object(b.a)(Object(b.a)({title:Object(a.jsx)(ne,{})},e),{},{transform:function(e){return e.id?e:Object(b.a)(Object(b.a)({},e),{},{id:V.a.camelCase(e.name)})},children:Object(a.jsxs)(Z.a,{children:[Object(a.jsxs)($.a,{label:"Properties",children:[Object(a.jsx)(g.a,{source:"id"}),Object(a.jsx)(g.a,{source:"name",validate:Object(v.k)()}),Object(a.jsx)(E.a,{source:"inputs",defaultValue:[],children:Object(a.jsxs)(L.a,{children:[Object(a.jsx)(ee.a,{label:"resource",source:"resource",reference:"resources",validate:Object(v.k)(),children:Object(a.jsx)(k.a,{optionText:"name"})}),Object(a.jsx)(q.a,{source:"flowRate",validate:Object(v.k)()})]})}),Object(a.jsx)(E.a,{source:"outputs",defaultValue:[],children:Object(a.jsxs)(L.a,{children:[Object(a.jsx)(ee.a,{label:"resource",source:"resource",reference:"resources",validate:Object(v.k)(),children:Object(a.jsx)(k.a,{optionText:"name"})}),Object(a.jsx)(q.a,{source:"flowRate",validate:Object(v.k)()})]})}),Object(a.jsx)(ee.a,{label:"building",source:"building",reference:"buildings",validate:Object(v.k)(),children:Object(a.jsx)(k.a,{optionText:"name"})})]}),Object(a.jsx)($.a,{label:"Design",children:Object(a.jsx)(oe,{})})]})}))},be=function(e){return Object(a.jsx)(C.a,Object(b.a)(Object(b.a)({title:"Create a Recipe"},e),{},{transform:function(e){return e.id?e:Object(b.a)(Object(b.a)({},e),{},{id:V.a.camelCase(e.name)})},children:Object(a.jsxs)(m.a,{children:[Object(a.jsx)(g.a,{source:"id"}),Object(a.jsx)(g.a,{source:"name",validate:Object(v.k)()}),Object(a.jsx)(E.a,{source:"inputs",defaultValue:[],children:Object(a.jsxs)(L.a,{children:[Object(a.jsx)(ee.a,{label:"resource",source:"resource",reference:"resources",validate:Object(v.k)(),children:Object(a.jsx)(k.a,{optionText:"name"})}),Object(a.jsx)(q.a,{source:"flowRate",validate:Object(v.k)()})]})}),Object(a.jsx)(E.a,{source:"outputs",defaultValue:[],children:Object(a.jsxs)(L.a,{children:[Object(a.jsx)(ee.a,{label:"resource",source:"resource",reference:"resources",validate:Object(v.k)(),children:Object(a.jsx)(k.a,{optionText:"name"})}),Object(a.jsx)(q.a,{source:"flowRate",validate:Object(v.k)()})]})}),Object(a.jsx)(ee.a,{label:"building",source:"building",reference:"buildings",validate:Object(v.k)(),children:Object(a.jsx)(k.a,{optionText:"name"})})]})}))},le=Object(u.a)({defaultData:{},localStorageKey:"plantDesigner",localStorageUpdateDelay:0,loggingEnabled:!0}),Oe=function(){return Object(a.jsxs)(i.a,{dataProvider:le,children:[Object(a.jsx)(o.a,{name:"resources",list:B,create:I,edit:F}),Object(a.jsx)(o.a,{name:"buildings",list:N,create:K,edit:J}),Object(a.jsx)(o.a,{name:"recipes",list:re,create:be,edit:ue})]})},de=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,957)).then((function(t){var c=t.getCLS,a=t.getFID,s=t.getFCP,j=t.getLCP,r=t.getTTFB;c(e),a(e),s(e),j(e),r(e)}))};n.a.render(Object(a.jsx)(j.a.StrictMode,{children:Object(a.jsx)(Oe,{})}),document.getElementById("root")),de()}},[[865,1,2]]]);
//# sourceMappingURL=main.a4e82a80.chunk.js.map